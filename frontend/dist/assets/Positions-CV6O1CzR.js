import{_ as F,r as i,a as G,A as H,c as J,b as l,w as a,d as n,B as g,E as p,C as K,o as B,D as L,k as Q,g as m,y as R,h as z,F as W}from"./index-BwUFaNKW.js";const X={class:"positions"},Y={class:"card-header"},Z={__name:"Positions",setup(h){const b=i(!1),U=i([]),V=i(1),y=i(10),k=i(0),r=i(!1),x=i("新增岗位"),f=i(null),o=G({title:"",company_name:"",location:"",latitude:0,longitude:0,description:"",requirements:"",max_students:1,status:"active"});async function v(){b.value=!0;try{const s=await g.get("/positions",{params:{page:V.value,per_page:y.value}});s.data.success&&(U.value=s.data.data.items,k.value=s.data.data.total)}catch{p.error("获取岗位列表失败")}finally{b.value=!1}}function D(){f.value=null,x.value="新增岗位",Object.assign(o,{title:"",company_name:"",location:"",latitude:0,longitude:0,description:"",requirements:"",max_students:1,status:"active"}),r.value=!0}function E(s){f.value=s.id,x.value="编辑岗位",Object.assign(o,s),r.value=!0}async function P(){try{f.value?(await g.put(`/positions/${f.value}`,o),p.success("更新成功")):(await g.post("/positions",o),p.success("创建成功")),r.value=!1,v()}catch{p.error("操作失败")}}async function $(s){try{await W.confirm("确定要删除该岗位吗？","提示",{type:"warning"}),await g.delete(`/positions/${s.id}`),p.success("删除成功"),v()}catch(e){e!=="cancel"&&p.error("删除失败")}}return H(()=>{v()}),(s,e)=>{const _=n("el-button"),d=n("el-table-column"),q=n("el-tag"),M=n("el-table"),N=n("el-pagination"),S=n("el-card"),c=n("el-input"),u=n("el-form-item"),C=n("el-input-number"),w=n("el-option"),j=n("el-select"),I=n("el-form"),O=n("el-dialog"),T=K("loading");return B(),J("div",X,[l(S,null,{header:a(()=>[z("div",Y,[e[14]||(e[14]=z("span",null,"岗位管理",-1)),l(_,{type:"primary",onClick:D},{default:a(()=>[...e[13]||(e[13]=[m("新增岗位",-1)])]),_:1})])]),default:a(()=>[L((B(),Q(M,{data:U.value,border:""},{default:a(()=>[l(d,{prop:"title",label:"岗位标题"}),l(d,{prop:"company_name",label:"公司名称"}),l(d,{prop:"location",label:"工作地点"}),l(d,{prop:"current_students",label:"当前学生数"}),l(d,{prop:"max_students",label:"最大学生数"}),l(d,{prop:"status",label:"状态"},{default:a(({row:t})=>[l(q,{type:t.status==="active"?"success":"info"},{default:a(()=>[m(R(t.status==="active"?"活跃":"已关闭"),1)]),_:2},1032,["type"])]),_:1}),l(d,{label:"操作",width:"200"},{default:a(({row:t})=>[l(_,{size:"small",onClick:A=>E(t)},{default:a(()=>[...e[15]||(e[15]=[m("编辑",-1)])]),_:1},8,["onClick"]),l(_,{size:"small",type:"danger",onClick:A=>$(t)},{default:a(()=>[...e[16]||(e[16]=[m("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[T,b.value]]),l(N,{"current-page":V.value,"onUpdate:currentPage":e[0]||(e[0]=t=>V.value=t),"page-size":y.value,"onUpdate:pageSize":e[1]||(e[1]=t=>y.value=t),total:k.value,layout:"total, prev, pager, next",onCurrentChange:v,style:{"margin-top":"20px"}},null,8,["current-page","page-size","total"])]),_:1}),l(O,{modelValue:r.value,"onUpdate:modelValue":e[12]||(e[12]=t=>r.value=t),title:x.value,width:"600px"},{footer:a(()=>[l(_,{onClick:e[11]||(e[11]=t=>r.value=!1)},{default:a(()=>[...e[17]||(e[17]=[m("取消",-1)])]),_:1}),l(_,{type:"primary",onClick:P},{default:a(()=>[...e[18]||(e[18]=[m("确定",-1)])]),_:1})]),default:a(()=>[l(I,{model:o,"label-width":"100px"},{default:a(()=>[l(u,{label:"岗位标题"},{default:a(()=>[l(c,{modelValue:o.title,"onUpdate:modelValue":e[2]||(e[2]=t=>o.title=t)},null,8,["modelValue"])]),_:1}),l(u,{label:"公司名称"},{default:a(()=>[l(c,{modelValue:o.company_name,"onUpdate:modelValue":e[3]||(e[3]=t=>o.company_name=t)},null,8,["modelValue"])]),_:1}),l(u,{label:"工作地点"},{default:a(()=>[l(c,{modelValue:o.location,"onUpdate:modelValue":e[4]||(e[4]=t=>o.location=t)},null,8,["modelValue"])]),_:1}),l(u,{label:"纬度"},{default:a(()=>[l(C,{modelValue:o.latitude,"onUpdate:modelValue":e[5]||(e[5]=t=>o.latitude=t),precision:6},null,8,["modelValue"])]),_:1}),l(u,{label:"经度"},{default:a(()=>[l(C,{modelValue:o.longitude,"onUpdate:modelValue":e[6]||(e[6]=t=>o.longitude=t),precision:6},null,8,["modelValue"])]),_:1}),l(u,{label:"岗位描述"},{default:a(()=>[l(c,{modelValue:o.description,"onUpdate:modelValue":e[7]||(e[7]=t=>o.description=t),type:"textarea",rows:4},null,8,["modelValue"])]),_:1}),l(u,{label:"岗位要求"},{default:a(()=>[l(c,{modelValue:o.requirements,"onUpdate:modelValue":e[8]||(e[8]=t=>o.requirements=t),type:"textarea",rows:4},null,8,["modelValue"])]),_:1}),l(u,{label:"最大学生数"},{default:a(()=>[l(C,{modelValue:o.max_students,"onUpdate:modelValue":e[9]||(e[9]=t=>o.max_students=t),min:1},null,8,["modelValue"])]),_:1}),l(u,{label:"状态"},{default:a(()=>[l(j,{modelValue:o.status,"onUpdate:modelValue":e[10]||(e[10]=t=>o.status=t)},{default:a(()=>[l(w,{label:"活跃",value:"active"}),l(w,{label:"已关闭",value:"closed"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},le=F(Z,[["__scopeId","data-v-b0130861"]]);export{le as default};
