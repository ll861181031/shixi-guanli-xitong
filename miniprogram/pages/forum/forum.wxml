<view class="container">
  <view class="search-bar">
    <input placeholder="æœç´¢å¸–å­ï¼ˆæ ‡é¢˜/å†…å®¹ï¼‰" value="{{keyword}}" bindinput="onSearchInput" bindconfirm="onSearchConfirm" confirm-type="search" />
  </view>

  <scroll-view class="category-bar" scroll-x="true">
    <view class="category" wx:for="{{categories}}" wx:key="id" data-id="{{item.id}}" bindtap="onCategoryTap" wx:class="{{item.id === activeCategoryId ? 'active' : ''}}">
      {{item.name}}
    </view>
  </scroll-view>

  <view wx:if="{{posts.length === 0 && !loading}}" class="empty">{{emptyText}}</view>

  <view wx:for="{{posts}}" wx:key="id" class="card post-card" data-id="{{item.id}}" bindtap="goToDetail">
    <view class="post-title">{{item.title}}</view>
    <view class="post-meta">
      <text class="author">{{item.author_name || 'åŒ¿å'}}</text>
      <text class="dot">Â·</text>
      <text class="time">{{item.created_at}}</text>
      <text class="dot">Â·</text>
      <text class="category-tag">{{item.category_name}}</text>
    </view>
    <view class="post-summary">{{item.summary || '...'}}</view>
    <view class="post-footer">
      <view class="metric">ğŸ‘ {{item.like_count}}</view>
      <view class="metric">ğŸ’¬ {{item.comment_count}}</view>
    </view>
  </view>

  <view class="load-more" wx:if="{{loading}}">åŠ è½½ä¸­...</view>
  <view class="load-more" wx:if="{{!hasMore && posts.length>0}}">æ²¡æœ‰æ›´å¤šäº†</view>

  <view class="fab" bindtap="goToPublish">å‘å¸ƒ</view>
</view>

