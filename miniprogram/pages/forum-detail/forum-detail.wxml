<view class="container">
  <view wx:if="{{post}}" class="card">
    <view class="title">{{post.title}}</view>
    <view class="meta">
      <text>{{post.author_name || 'åŒ¿å'}}</text>
      <text class="dot">Â·</text>
      <text>{{post.created_at}}</text>
      <text class="dot">Â·</text>
      <text class="tag">{{post.category_name}}</text>
    </view>
    <view class="content">{{post.content}}</view>

    <view wx:if="{{post.images && post.images.length}}" class="images">
      <block wx:for="{{post.images}}" wx:key="*this">
        <image src="{{item}}" mode="aspectFill" data-src="{{item}}" bindtap="previewImage" />
      </block>
    </view>

    <view class="actions">
      <button size="mini" bindtap="likePost">ğŸ‘ {{post.like_count || 0}}</button>
      <view class="metric">ğŸ’¬ {{post.comment_count || 0}}</view>
    </view>
  </view>

  <view class="card">
    <view class="section-title">è¯„è®º</view>
    <view wx:if="{{comments.length === 0}}" class="empty">æš‚æ— è¯„è®º</view>
    <view wx:for="{{comments}}" wx:key="id" class="comment">
      <view class="comment-meta">
        <text>{{item.user_name || 'åŒ¿å'}}</text>
        <text class="dot">Â·</text>
        <text>{{item.created_at}}</text>
      </view>
      <view class="comment-content">{{item.content}}</view>
    </view>
    <view class="load-more" wx:if="{{loadingComments}}">åŠ è½½ä¸­...</view>
    <view class="load-more" wx:if="{{!hasMore && comments.length>0}}">æ²¡æœ‰æ›´å¤šäº†</view>
  </view>

  <view class="comment-bar">
    <input placeholder="è¯´ç‚¹ä»€ä¹ˆ (1-200å­—)" maxlength="200" value="{{commentInput}}" bindinput="onCommentInput" />
    <button size="mini" bindtap="submitComment">å‘é€</button>
  </view>
</view>

