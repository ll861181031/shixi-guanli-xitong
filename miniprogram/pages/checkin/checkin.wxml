<view class="container">
  <view wx:if="{{loadingPosition}}" class="skeleton">加载岗位信息...</view>
  <view wx:if="{{!loadingPosition && !hasApproved}}" class="empty">
    <view class="empty-text">{{emptyReason || '暂无可签到的岗位'}}</view>
    <button class="btn-primary" bindtap="goToPositions">去查看岗位</button>
    <button class="btn-ghost" bindtap="retryLoad">重试</button>
  </view>

  <view wx:if="{{!loadingPosition && hasApproved && position}}" class="card">
    <view class="position-info">
      <view class="title">{{position.title}}</view>
      <view class="company">{{position.company_name}}</view>
      <view class="location">📍 {{position.location}}</view>
      <view class="radius">允许范围：{{allowedRadius}} 米</view>
    </view>

    <view class="today-status">
      <view class="status-label">今日状态</view>
      <view class="status-value">{{todayStatusText}}</view>
      <view wx:if="{{todayTimeText}}" class="status-desc">签到时间：{{todayTimeText}}</view>
    </view>

    <view class="location-section">
      <button class="btn-primary" bindtap="getLocation">获取当前位置</button>
      <view wx:if="{{location}}" class="location-info">
        <view class="info-item">
          <text>当前位置：</text>
          <text>{{locationText || (location.latitude + ', ' + location.longitude)}}</text>
        </view>
        <view class="hint">请确保在岗位指定范围内完成签到</view>
      </view>
    </view>

    <button class="btn-primary submit-btn" bindtap="submitCheckin" disabled="{{!location}}">
      提交签到
    </button>

    <button class="btn-ghost" bindtap="goToHistory">查看签到记录</button>
  </view>
</view>

